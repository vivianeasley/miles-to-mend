(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const e of t.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&c(e)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();const C=(o,i=4)=>{const r={};return o.forEach(([c,n])=>{const t=document.createElement("canvas"),e=t.getContext("2d"),s=64;t.width=s,t.height=s,e.imageSmoothingEnabled=!1,e.font=`${s}px sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(c,s/2,s/2);const d=s/i,l=document.createElement("canvas");l.width=d,l.height=d;const u=l.getContext("2d");u.imageSmoothingEnabled=!1,u.drawImage(t,0,0,d,d),e.clearRect(0,0,s,s),e.drawImage(l,0,0,d,d,0,0,s,s),e.filter="sepia(100%)",e.drawImage(t,0,0);const m=e.getImageData(0,0,s,s),p=m.data;for(let f=0;f<p.length;f+=4){const I=p[f],B=p[f+1],L=p[f+2];I<30&&B<30&&L<30&&(p[f+3]=0)}e.putImageData(m,0,0);const M=t.toDataURL("image/png");r[n]=M}),r},N=[["🌲","1tree"],["🌳","1tree2"],["⛰️","1mountain"],["🏔️","1mountain2"],["🛖","2hut"],["🏚️","2home"],["⛪","2church"],["🏛️","2temple"],["🏯","2castle"],["🏰","2castle2"],["👶","3people"],["🧒","3people1"],["🧓","3people2"],["🧑‍🦱","3people3"],["🧑‍🦰","3people4"],["🧑‍🦳","3people5"],["🧑","3people6"],["👵","3people7"],["👩‍🦱","3people8"],["👩‍🦰","3people9"],["👩‍🦳","3people10"],["👱‍♀️","3people11"],["👴","3people12"],["👨‍🦱","3people13"],["👨‍🦰","3people14"],["👨‍🦳","3people15"],["🧔","3people16"],["🐓","4animal1"],["🐖","4animal2"],["🐂","4animal3"],["🐏","4animal4"],["🐕","4animal5"],["🐐","4animal6"],["🐎","4animal7"],["🦌","4animal8"],["🦉","4animal9"],["🐀","4animal10"],["🦇","4animal11"],["🐇","4animal12"],["🐕","4animal13"],["🌼","5flower"],["🌷","5flower1"],["🥀","5flower2"],["🌻","5flower3"],["🌱","5flower4"],["🍃","5flower5"],["🌸","5flower6"],["🌿","5flower7"],["🌺","5flower8"],["🍂","5flower9"],["🌹","5flower10"],["🍀","5flower11"],["🪷","5flower12"],["🌵","5flower13"],["🌾","5flower14"],["🐜","6insect"],["🐛","6insect1"],["🪲","6insect2"],["🦟","6insect3"],["🐞","6insect4"],["🐝","6insect5"],["🪳","6insect6"],["🪱","6insect7"],["🦋","6insect8"],["🪰","6insect9"],["🕷","6insect10"],["🦗","6insect11"],["🕸","6insect12"],["🦇","6insect13"]],q=(o,i,r,c,n,t,e={})=>{const s=document.getElementById(o);if(!s){console.error("SVG element not found");return}let a;switch(i){case"image":a=document.createElementNS("http://www.w3.org/2000/svg","image"),a.setAttribute("href",e.imagePath||""),a.setAttribute("width",r),a.setAttribute("height",c),a.setAttribute("x",n),a.setAttribute("y",t);break;case"polygon":a=document.createElementNS("http://www.w3.org/2000/svg","polygon");const d=(e.points||[]).map(l=>`${l.x},${l.y}`).join(" ");a.setAttribute("points",d),a.setAttribute("fill",e.fill||"none"),a.setAttribute("stroke",e.stroke||"black");break;case"line":if(e.points&&e.points.length>=2)if(e.curved){const[l,u]=e.points,m={x:l.x+Math.random()*50,y:l.y+Math.random()*50},p={x:u.x-Math.random()*50,y:u.y-Math.random()*50};a=document.createElementNS("http://www.w3.org/2000/svg","path");const M=`M ${l.x} ${l.y} C ${m.x} ${m.y}, ${p.x} ${p.y}, ${u.x} ${u.y}`;a.setAttribute("d",M)}else{a=document.createElementNS("http://www.w3.org/2000/svg","polyline");const l=e.points.map(u=>`${u.x},${u.y}`).join(" ");a.setAttribute("points",l)}else{console.error("Line requires at least two points");return}a.setAttribute("stroke",e.stroke||"black"),a.setAttribute("fill","none");break;default:console.error("Unsupported element type");return}s.appendChild(a)};let S=!1;const O=C(N),E=document.getElementById("game-svg"),P=document.getElementById("player");let y,b,x=3500,v=3500,g,h;function w(o){return o*Math.PI/180}function R(o,i,r,c){const t=w(o),e=w(r),s=w(r-o),a=w(c-i),d=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t)*Math.cos(e)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))*3.28084}function $(o){return o/10}function A(){y=window.innerWidth,b=window.innerHeight;const o=x-y/2,i=v-b/2;E.setAttribute("viewBox",`${o} ${i} ${y} ${b}`),P.setAttribute("cx",x),P.setAttribute("cy",v),S===!1&&(setTimeout(()=>{X(o,i)},2e3),S=!0)}function D(o,i){x+=o,v+=i,A()}function T(o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x",o-5),r.setAttribute("y",i-5),r.setAttribute("width",10),r.setAttribute("height",10),r.setAttribute("fill","red"),E.appendChild(r)}function V(o){const{latitude:i,longitude:r}=o.coords;if(g!==void 0&&h!==void 0){const c=R(g,h,i,r);if(c>=30){const n=$(c),t=$(c);D(n,t),T(x,v),g=i,h=r}}else g=i,h=r}navigator.geolocation?navigator.geolocation.watchPosition(V):alert("Geolocation is not supported by this browser.");window.addEventListener("resize",A);A();function X(o,i){const c=Math.ceil(y/150)+10,n=Math.ceil(b/150)+10;for(let t=0;t<n;t++)for(let e=0;e<c;e++){const s=o+e*150,a=i+t*150;Y(150,s,a)}}function Y(o,i,r){const c=Math.floor(Math.random()*o/2),n=Math.floor(Math.random()*o/2),t=Math.random()>.5?"1tree":"1tree2";q("game-svg","image",75,75,i+c,r+n,{imagePath:O[t]})}
